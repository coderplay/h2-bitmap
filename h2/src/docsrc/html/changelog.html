<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Copyright 2004-2011 H2 Group. Multiple-Licensed under the H2 License, Version 1.0,
and under the Eclipse Public License, Version 1.0
(http://h2database.com/html/license.html).
Initial Developer: H2 Group
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><title>
Change Log
</title><link rel="stylesheet" type="text/css" href="stylesheet.css" />
<!-- [search] { -->
<script type="text/javascript" src="navigation.js"></script>
</head><body onload="frameMe();">
<table class="content"><tr class="content"><td class="content"><div class="contentDiv">
<!-- } -->

<h1>Change Log</h1>

<h2>Next Version (unreleased)</h2>
<ul>
<li>Support for COSH, SINH, and TANH functions.
</li><li>Support for the % operator (modulo) thanks to Noel Grandin.
</li><li>Issue 288: Some right outer join queries failed to produce the correct result or
    threw exceptions such as "column x must be in the group by list".
</li><li>Some right outer joins with invalid column referenced (typos) threw a NullPointerException instead of
    "column not found" exception.
</li><li>New database setting EARLY_FILTER to allow table implementations 
    to apply filter conditions early on.
</li><li>Cluster: in a two node cluster, if cluster node stopped, and autocommit was enabled,
    then changes on the remaining cluster node didn't get committed automatically.
</li><li>Issue 291: Allow org.h2.value.Value as FUNCTION ALIAS params and return value.
</li><li>Issue 265: Linked tables: auto-reconnect if the backside connection is lost
    (workaround for the MySQL problem that disconnects after 8 hours of inactivity).
</li><li>Linked tables: the index conditions was sometimes not used when querying the remote database.
</li><li>Issue 294: OSGi: the versions were missing in manifest package exports.
</li><li>The option -baseDir didn't work with symbolic links.
</li><li>Support for ALTER TABLE ADD COLUMN IF NOT EXISTS.
</li><li>Database-level connection settings could only be set in the database URL,
    but not using the Properties parameter of DriverManager.getConnection(String url, Properties info).
</li></ul>

<h2>Version 1.3.152 Beta (2011-03-01)</h2>
<ul><li>H2 Console: browser detection didn't work for Mac OS X with OpenJDK 1.7.
</li><li>The double or float value -0.0 is now distinct from 0.0 (as in Java).
</li><li>TCP and PG server: if the default port is already in use, the services are now started on
    another free port (unless the port is explicitly set). This allows to start the H2 Console
    even if the TCP or PG servers are already running.
</li><li>LIKE didn't use an index unless the right hand side was a literal or parameter.
    Now an index is used for LIKE CONCAT(?, '%').
</li><li>Array literals with zero or one element were not be parsed correctly.
    Now trailing commas are ignored (as in Java). Expressions of the form '(1)' are still parsed as the value 1.
    An empty array is '()'. An array with one element must contain a comma to be parsed as an array, as in '(1,)'.
</li><li>Issue 290: Conditions using subqueries were sometimes evaluated before much simpler conditions,
    which was very bad for performance. This includes subqueries returning a value, EXISTS subqueries,
    and IN(SELECT ..) subqueries.
</li><li>Issue 288: Some queries with right outer joins or nested joins could throw a NullPointerException.
</li><li>The database can now be compiled with Java 7.
    Stub methods for the new JDBC 4.1 methods have been implemented,
    but the new features can't be used yet.
</li><li>Issue 289: Railroads (BNF) for "Column Definition" was incorrect.
</li><li>Issue 287: Railroads (BNF) is not readable for certain web-browser configurations (dark background).
</li><li>Executing a CSVREAD query multiple times could result in an exception if the data was changed on disk.
</li><li>SQL railroad diagrams: improved images for people with black background settings.
</li><li>Build-in documentation search: improved results if searching for multiple words.
</li><li>DatabaseMetaData.getColumns: there is a typo in the JDBC specification, so that the column #19 is named
    SCOPE_CATLOG instead of SCOPE_CATALOG. For compatibility with the specification, a new column #24
    named SCOPE_CATLOG is added. This typo is fixed in the JDBC 4.1 specification.
    Please note that MySQL only supports SCOPE_CATALOG, while other databases only support SCOPE_CATLOG.
</li><li>Build: jar files are now downloaded using Maven if possible (and cached in the local Maven repository).
    Unfortunately, in many cases this will download more data from the Maven repository.
</li><li>JaQu has been improved a lot thanks to the new committer James Moger.
</li><li>New sample application that shows how to use "instead of" triggers to support updatable views.
</li><li>H2 Console: opening a MS SQL Server database is now faster.
    Also, listing the database meta data sometimes resulted in an exception.
</li><li>Linked tables / MS SQL Server: if the tables were created in mixed case in MS SQL Server,
    then the identifiers in the linked tables were case sensitive (in H2).
</li><li>MVCC: the probability of a lock timeout is now lower if multiple threads try to update the same rows.
</li><li>Building only the documentation (without compiling all classes) didn't work, specially: ./build.sh clean javadocImpl.
</li><li>Documentation on how data is stored internally and how indexes work (in the performance section).
</li><li>Some people reported NullPointerException in FileObjectDiskMapped.
    The most likely explanation is that multiple threads access the same object at the same time.
    Therefore, the public methods in this class are now synchronized.
</li><li>Improved error detection when starting a server with invalid arguments,
    such as "-tcpPort=9091" or "-tcpPort 9091" (as one parameter) instead of "-tcpPort", "9091".
</li><li>The function STRINGDECODE ignored characters after a non-escaped double quote.
    This is no longer the case.
</li><li>The new CSV option feature introduced in version 1.3.150 didn't support spaces.
    Now the escape mechanism is changed to support it.
</li><li>The pseudo-column "_ROWID_" now supports insert, update, and merge (only enabled for version 1.3.x).
</li><li>Deleting rows in the trigger table inside a trigger could result in a NullPointerException.
</li></ul>

<h2>Version 1.3.151 Beta (2011-02-12)</h2>
<ul><li>Server: it was possible to open a database outside of the base URL
    (if one was set). The test case was broken.
</li><li>The H2 Console tool now supports a database URL as a command line option.
</li><li>Clob.getSubString and Blob.getBytes are now up to 3 times faster.
</li><li>New database setting DEFAULT_CONNECTION (disabled by default)
    to support DriverManager.getConnection("jdbc:default:connection").
    Please note the Oracle JDBC driver will try to resolve this database URL if it is loaded before the H2 driver.
</li><li>JaQu: the static map Db.TOKENS was not synchronized.
</li><li>DatabaseMetaData.getProcedureColumns returned the wrong data
    (it also returned the Connection parameter if there was any).
</li><li>Issue 284: If the query cache was used (enabled by default in version 1.3.x),
    and multiple threads used the same connection,
    and the same query but different prepared statements,
    parameters of one prepared statement could be overwritten by another.
</li><li>If the query cache was used (enabled by default in version 1.3.x),
    parameters of re-used queries were not reset in prepared statements.
</li><li>CallableStatement: the first row of the result set was skipped when using CallableStatement.execute().
</li><li>Batch update exceptions now include the root cause and all chained exceptions (getNextException).
</li><li>Reading a large result set with a BLOB or CLOB column could throw a NullPointerException.
</li><li>Support for the MS SQL Server syntax VARCHAR(MAX).
</li><li>The Recover tool could print "/ by zero" on an empty database.
</li><li>For tables without a single column primary key of type INT or LONG,
    the unique row id had gaps, which didn't look nice.
</li><li>Each table now has a pseudo-column "_ROWID_" to get the unique row id (only enabled for version 1.3.x).
</li><li>User defined functions can now have parameters of any class. Values of type
    OTHER (or OBJECT or JAVA_OBJECT) are automatically de-serialized in that case.
</li><li>Linked tables: for NUMERIC column, Oracle reports precision 0 and scale -127.
    A workaround has been implemented (the same as for DECIMAL columns in version 1.3.150).
</li><li>Issue 279: Auto-Server mode: unclear error message when trying to connect using AUTO_SERVER
    if the database is already open without the flag (Connection is broken: "null").
</li><li>Issue 238: Can drop a column that has a single-column constraint.
</li></ul>

<h2>Version 1.3.150 Beta (2011-01-28)</h2>
<ul><li>CSVREAD / CSVWRITE: instead of setting the options one by one,
    all options can be combined into a space separated key-value pairs.
</li><li>CSVREAD / CSV tool: there is a new option "lineCommentCharacter" to set or disable line comments.
    For H2 version 1.2, the default is '#' (as before). For H2 version 1.3, line comments are disabled by default.
</li><li>Issue 277: JaQu didn't correctly convert a CLOB column to a String.
</li><li>./build.sh testNetwork could block if there was a network configuration problem.
</li><li>Reading input streams from the classpath is now supported. Example:
    RUNSCRIPT FROM 'classpath:org/h2/samples/newsfeed.sql'.
</li><li>PreparedStatement.toString() now includes the parameter values in a human readable format.
</li><li>New database setting OPTIMIZE_IN_SELECT (enabled by default for version 1.3.x).
    If enabled, IN(SELECT...) conditions are faster if there are many rows in the table or subquery.
</li><li>Linked tables: for DECIMAL column, Oracle reports precision 0 and scale -127.
    A workaround has been implemented.
</li><li>TCP Server: a base directory with a prefix with a database name with prefix didn't work as expected
    (this only applies to non-disk and wrapped file systems).
</li><li>Version 1.3: when re-running the same query so that the previous result was re-used,
    and if the result set was large so that it was stored externally (in a temp file or in a temp table),
    then reading rows from both result sets resulted in an exception or wrong behavior.
</li><li>A new sample application that shows how to create
    a read-only database in a zip file where the database file is split into multiple smaller parts.
</li><li>The Backup tool now supports compressing all files in a given directory.
</li><li>H2 Console: the special syntax @list and @meta can not be combined.
</li><li>The wrong error message was thrown when trying to open a database where the database file
    could not be read for some reason (for example because the split file system was used, and the file
    was split at the wrong position).
</li><li>There was a memory leak in the trace system. Opening and closing many connections could run out of memory.
</li><li>The scan-resistant cache type "TQ" (two queue) is again available.
    To use it, append ;CACHE_TYPE=TQ to the database URL.
</li></ul>

<h2>Version 1.3.149 Beta (2011-01-07)</h2>
<ul><li>Lob in database: after the process was killed while adding a lob,
    inserting a lob could throw an exception (primary key violation in LOB_MAP).
</li><li>Server tool: the tcpShutdown feature now also stops other servers (web server and PostgreSQL server).
</li><li>Server tool: the tcpShutdown url must now end with the port if the port is used.
</li><li>Server tool: when starting one service fails, the started services are now stopped.
</li><li>Multi-version concurrency: SELECT ... FOR UPDATE threw a "concurrent update" exception immediately
    instead of a "lock timeout" exception after the set lock timeout if the row was already locked by another connection.
</li><li>Translation: the H2 Console and error messages have been translated to Czech by Hannibal (http://hannibal.cestiny.cz/). Thanks a lot!
</li><li>When the system property h2.lobInDatabase is set, reading a BLOB is a bit faster
    because the length is not read.
</li><li>The SimpleResultSet now has a feature to not close the result set after reading the last row.
</li><li>Native fulltext search: the ignore list doesn't need to be all uppercase now.
</li><li>Improved statistics output in the Recover tool.
</li><li>Issue 269: GROUP BY queries with a column or having clause that contains IN(SELECT ...)
    could return the wrong values. Example: SELECT X IN(SELECT Y) FROM Z GROUP BY X.
</li><li>After closing a database, the writer thread will stop almost immediately (instead of after at most 100 ms).
    This should avoid error messages in the Tomcat log file after a shutdown.
</li><li>Issue 271: ResultSet.getConcurrency() did not correctly detect that the result set is not updatable.
</li><li>The SLF4J 1.6 API is now used by default (this should not have any user visible effect).
</li><li>The org.h2.tools.Console no longer calls System.exit on shutdown
    (this should not have any user visible effect, but should allow to integrate the tool easier into other applications).
</li><li>Improved date / time arithmetics. Adding and subtracting a
    floating point value from a date or timestamp is now supported.
</li><li>When creating a BLOB with in InputStream or a CLOB with a Reader, and the InputStream or Reader
    threw an non-IOException, then the LOB storage was broken when storing LOBs in the database.
</li><li>EXPLAIN SELECT didn't include the sample size if one was set.
</li><li>Improved EXPLAIN plan formatting and documentation.
</li><li>Issue 266: Domains: a NOT NULL clause in a domain definition ignored.
</li><li>More accurate calculation of variance and standard deviation for large number of samples with low variance
    (now using Welford's method).
</li><li>Server: CLOB data with unicode characters between character code 0xd800 and 0xdfff
    were not transferred correctly. In many cases, the thread was stuck afterwards.
</li><li>Issue 264: the Hibernate dialect in src/tools was removed because it is outdated.
</li><li>Cache size limit could be exceeded for certain queries, leading to an OutOfMemoryError
    in some cases. Fixed.
</li></ul>

<h2>Version 1.3.148 Beta (2010-12-12)</h2>
<ul><li>The built-in connection pool was simplified a bit.
    The dispose() method no longer throws an exception (it only logs it).
</li><li>The database upgrade (to upgrade from H2 version 1.1.x) has been simplified.
</li><li>The feature to log all errors (system properties h2.logAllErrors and h2.logAllErrorsFile) has been removed.
</li><li>When starting the H2 Console, the properties file can now be completely disabled.
</li><li>Server.openBrowser no longer writes to System.out directly if opening the URL failed.
</li><li>The INSERT optimizations (INSERT ... DIRECT SORTED SELECT) were not parsed correctly when using a column list.
</li><li>H2 Console: the tables and columns are now listed for SQLite as well.
</li><li>H2 Console: improved autocomplete feature (also simplified the source code for this feature).
</li><li>Issue 260: the DbStarter servlet context listener now starts the server before opening a connection,
    so that connecting using the server mode works.
</li><li>The Shell tool can now enable, disable, and display the current autocommit mode.
</li><li>Issue 259: there is a limitation in the cluster mode:
    The SQL statement SET AUTOCOMMIT FALSE doesn't work.
    To disable autocommit, the method Connection.setAutoCommit(false) needs to be called.
    This is now documented.
</li><li>Connection pool / DataSource: a NullPointerException was thrown when
    using a database URL that doesn't start with "jdbc:h2:".
</li><li>Using the java.sql.Blob or java.sql.Clob interfaces could throw the wrong
    exception after the object was closed.
</li><li>LOB: in server mode, if the feature "LOBs in database" is disabled,
    the temporary files are now created in the temp directory (the same as
    when "LOBs in database" is enabled).
</li></ul>

<h2>Version 1.2.147 (2010-11-21)</h2>
<ul><li>H2 Console: the server properties directory can now be set on the command line using
    java ... -properties &lt;directory&gt;. Issue 159.
</li><li>New feature INSERT INTO ... DIRECT SELECT, mainly to speed up loading tables
    from a CSV file. When using DIRECT, then the results from the query are directly applied
    in the target table without any intermediate step (without temporary file).
</li><li>Converting binary data to UUID was incorrect when the converting more than 31 bytes.
    Now always the first 16 bytes are used.
</li><li>Improved date / time arithmetics. Now supported are
    multiplying and dividing a time with / by a number,
    adding and subtracting a time to / from a time or date,
    subtracting a time or timestamp from a timestamp.
</li><li>The Ant build script has been removed because it is no longer up to date.
</li><li>Nested outer joins without brackets were not working as expected. Example:
    select * from a inner join b inner join c on c.id = b.id on b.id = a.id;
</li><li>JMX (the Java management extension) is now supported. Issue 253.
</li><li>Creating a comment on a column didn't work if the schema name was equal the database name.
</li><li>When using multi-version concurrency, re-running a prepared statement with the same parameters
    would sometimes give the same result even if another connection committed a change (the previous result was sometimes
    re-used incorrectly).
</li><li>When using SELECT_FOR_UPDATE_MVCC (lock only the selected rows when using MVCC),
    the selected rows were sometimes not locked correctly.
</li><li>When using Lucene 3, the index files were not always closed when the database was closed.
</li><li>Concurrently preparing a statement and altering a table could throw a table not found exception.
</li><li>When concurrently preparing many statements with a subquery, in some cases the query didn't run
    (Column "..." must be in the GROUP BY list).
</li><li>CallableStatement: now the syntax "{? = CALL...}" is supported as well.
</li><li>Lob in databases: two small BLOB or CLOB values were always considered equal.
    This also affected unique indexes.
</li><li>The shutdown hook is (re-) enabled by default even for H2 version 1.3.x.
</li><li>When creating a database from a recovery script, the same user can now be used
    (CREATE USER now always includes IF EXISTS).
</li><li>The H2 Console now prints a status message if started with parameters.
</li></ul>

<h2>Version 1.3.146 Beta (2010-11-08)</h2>
<ul><li>This is a beta version. The next version will be 1.2.147. The differences between 1.2.x and 1.3.x are:
</li><li>In version 1.3.x, h2.lobInDatabase (store CLOB and BLOB in the database file) is enabled by default.
</li><li>In version 1.3.x, ANALYZE_AUTO is 2000 (automatic ANALYZE).
</li><li>In version 1.3.x, DB_CLOSE_ON_EXIT (the shutdown hook) is disabled by default.
</li><li>In version 1.3.x, DROP_RESTRICT (default action for DROP is RESTRICT) is enabled.
</li><li>In version 1.3.x, FUNCTIONS_IN_SCHEMA (allow to store functions in a schema) is enabled.
</li><li>In version 1.3.x, LARGE_TRANSACTIONS (support for very large transactions) is enabled.
    Changes to tables without a primary key can be buffered to disk.
</li><li>In version 1.3.x, MAX_MEMORY_ROWS_DISTINCT is set to a 10000.
</li><li>In version 1.3.x, NESTED_JOINS (nested joins and right outer joins) is enabled.
</li><li>In version 1.3.x, OPTIMIZE_INSERT_FROM_SELECT (speed up CREATE TABLE ... AS SELECT) is enabled.
</li><li>In version 1.3.x, OPTIMIZE_OR (convert OR conditions to IN(..) if possible) is enabled.
</li><li>In version 1.3.x, QUERY_CACHE_SIZE is enabled.
</li><li>In version 1.3.x, SELECT_FOR_UPDATE_MVCC (MVCC and SELECT FOR UPDATE) is enabled.
</li><li>In version 1.3.x, RUNSCRIPT and SCRIPT (commands and tools), use UTF-8 by default (ScriptCommand.charset).
</li><li>In version 1.3.x, Lucene 3 is used by default. Issue 147.
</li><li>When the system property h2.lobInDatabase is set, the lob tables were always
    created when closing the database, even if the tables were not needed.
</li><li>In the MySQL mode, SHOW TABLES didn't work, and meta data tables were not
    case insensitive. Updatable result sets didn't work as expected. Issue 249.
</li><li>Connection-created Clob and Blob objects can now be filled using
    Clob.setCharacterStream(1), Clob.setString(1, s), Blob.setBytes(1, x), Blob.setBinaryStream(1).
    Issue 235.
</li><li>Trying to convert a very small CLOB to a BLOB or a very small CLOB to a BLOB threw a NullPointerException.
</li><li>INFORMATION_SCHEMA.SETTINGS: now the current page count can be queried using
    select * from information_schema.settings where name = 'info.PAGE_COUNT'.
</li><li>For an invalid value exception, the parameter name and value was
    switched in some cases.
</li><li>When using trace level 3, opening a database no longer prints
    there is a EOFException (because that is the expected behavior).
</li><li>CALL calling a Java function with return type ResultSet and
    return value null threw a ClassCastException.
</li><li>SELECT ... FROM CSVREAD no longer creates a temporary file.
    Some large imports are now twice as fast.
</li></ul>

<h2>Version 1.2.145 (2010-11-02)</h2>
<ul><li>A new String cache is now created at most once every 5 second, so that out of memory exceptions
    are not artificially delayed.
</li><li>After closing a database, the writer thread will stop after 100 ms at the latest (instead of 1 second).
</li><li>Opening a large database could fail in theory if the process was killed and then
    not fully compacted (because the unique transaction log key was re-used).
</li><li>Views now store the schema for Java functions if "functions in schemas" is enabled
    (system property h2.functionsInSchema).
</li><li>Improved error message if the LOB files are already deleted on the client side.
</li><li>Closing a Statement or PreparedStatement at the same time as executing a statement
    could throw a strange exception. Issue 241.
</li><li>The Recover tool did not work with compressed lob files (set compress_lob lzf).
    Also, sometimes the Recover tool was very slow, specially using a 64-bit JVM, because
    it tried to de-compress lob files even if they were not compressed
    (which could allocate a lot of memory).
</li><li>H2 Console: webAllowOthers and webSSL were swapped if they didn't exist in the properties file. Issue 244.
</li><li>When the system property h2.lobInDatabase is set, CREATE TABLE ... AS SELECT
    with a LOB column did not always work.
</li><li>Some system properties are not supported any longer, because they can
    already be set in the database URL. The constants are:
    CACHE_SIZE_DEFAULT, CACHE_TYPE_DEFAULT, DEFAULT_LOCK_MODE,
    LOCK_MODE_READ_COMMITTED, DEFAULT_MAX_LENGTH_INPLACE_LOB,
    DEFAULT_MAX_LENGTH_INPLACE_LOB2, DEFAULT_MAX_MEMORY_UNDO,
    DEFAULT_MAX_OPERATION_MEMORY, DEFAULT_PAGE_SIZE,
    DEFAULT_RESULT_SET_CONCURRENCY, MIN_WRITE_DELAY.
</li><li>Various system properties have been replaced with database level settings:
    ALIAS_COLUMN_NAME, ANALYZE_AUTO, ANALYZE_SAMPLE, DATABASE_TO_UPPER,
    DEFAULT_ESCAPE, DEFRAG_ALWAYS, DROP_RESTRICT,
    ESTIMATED_FUNCTION_TABLE_ROWS, FUNCTIONS_IN_SCHEMA,
    LARGE_RESULT_BUFFER_SIZE, LARGE_TRANSACTIONS, MAX_COMPACT_COUNT,
    MAX_COMPACT_TIME, MAX_MEMORY_ROWS_DISTINCT, MAX_QUERY_TIMEOUT,
    NESTED_JOINS, OPTIMIZE_DISTINCT, OPTIMIZE_EVALUATABLE_SUBQUERIES,
    OPTIMIZE_INSERT_FROM_SELECT, OPTIMIZE_IN_LIST, OPTIMIZE_IS_NULL,
    OPTIMIZE_OR, OPTIMIZE_SUBQUERY_CACHE, OPTIMIZE_TWO_EQUALS,
    OPTIMIZE_UPDATE, PAGE_STORE_INTERNAL_COUNT, PAGE_STORE_TRIM,
    QUERY_CACHE_SIZE, RECOMPILE_ALWAYS, RECONNECT_CHECK_DELAY,
    SELECT_FOR_UPDATE_MVCC, SHARE_LINKED_CONNECTIONS.
    See the Javadoc documentation of DbSettings for details.
    The system properties are still supported for backward compatibility.
</li><li>When the system property h2.nestedJoins was enabled, some outer joins returned the wrong result.
</li><li>Opening a database could throw a NullPointerException.
</li><li>After a crash, the database file did not always shrink because
    old transaction log pages were not removed from the file.
</li><li>Various CallableStatement methods could throw a NullPointerException.
</li><li>LOB files were not deleted when running DROP ALL OBJECTS.
</li><li>MS SQL Server compatibility: support "N" in front of string literals ("National Language" strings). Issue 240.
</li><li>CAST: when converting a string to binary, it is hex encoded (every byte two characters);
    a hex string can be converted to a number by first converting it to binary. Examples:
    CAST(CAST('FFFF' AS BINARY) AS INT) = 65535, CAST(65535 AS BINARY) = '0000FFFF'.
</li><li>When a domain (user defined data type) contained a user defined function, the database could not be opened.
</li><li>CAST('011' AS INT) will no longer use decode the value as an octal number (using Integer.decode) but now use Integer.parseInt.
    The same logic applied to byte, short, and long. This also means that trying to convert hex numbers (0x...) with CAST now fails.
</li><li>A table in the Recover tool script could not be imported if the script contained duplicate keys.
</li></ul>

<h2>Version 1.2.144 (2010-10-15)</h2>
<ul><li>The Windows .bat files did not contain CR+LF.
</li><li>The LOB storage (when the system property h2.lobInDatabase is set) is now only initialized when needed.
</li><li>The index condition columnName IS NULL was not efficient when using a clustered index.
</li><li>The Recover tool did not work for databases larger than 2 GB.
</li><li>In memory database: outer joins with a condition "column is null" could return the wrong result.
</li><li>Temporary files were not created in the temporary directory of the system, but in the current working directory.
    This affected temporary undo log files for read-only databases, temporary files for large result sets when using read-only databases,
    and temporary LOB files when storing LOBs in the database (system property h2.lobInDatabase).
    When the setting h2.lobInDatabase is not set,
    temporary LOB files are still stored in a sub-directory (.lobs.db/) of the current working directory.
</li><li>New experimental feature to speed up CREATE TABLE ... AS SELECT.
    To enable the feature, set the system property h2.optimizeInsertFromSelect to true.
    For large queries, performance can be doubled.
</li><li>When LOB objects are stored in the database (using the experimental setting h2.lobInDatabase),
    and using the MVCC mode, opening a database with uncommitted transactions could throw a NullPointerException.
</li><li>Support of stored procedures with OUT parameters in CallableStatement is implemented.
</li><li>PreparedStatement.getMetaData() was not always consistent with resulting ResultSet.getMetaData().
</li><li>The build tool now uses JAVA_HOME for javac as well. Issue 233.
</li><li>Opening and closing encrypted databases is now much faster.
</li><li>H2 Console: new experimental feature to support file download and upload,
    but only if there is a directory called "transfer" in the current working directory.
    For security reasons, only very simple file names are supported. Sub-directories are not supported.
    To upload, use transfer.jsp; to download, use transfer/fileName.
</li><li>A new sample application that shows how to manually create an encrypted
    and compressed script file.
</li><li>Performance has been improved a bit.
</li><li>DatabaseMetaData.getJDBCMajorVersion now returns 4 (instead of 3) when the driver
    is compiled with Java 6 (the default).
</li><li>Re-added the internal utility class BitField which improves performance of opening
    and closing a database (because it supports setByte / getByte, unlike java.util.BitSet).
</li><li>INFORMATION_SCHEMA.SESSIONS: the start time of a SQL statement
    is no longer set in each case. It is only set for long running statements.
    This change should improve performance a bit on some devices, specially when using Android.
</li><li>A old databases without user name and password (created with H2 version 1.2.142 or older)
    couldn't be opened with version 1.2.143. Fixed.
</li><li>The database upgrade classes have been renamed.
</li><li>The database did not automatically upgrade when using a connection pool or data source.
</li><li>JaQu: a database object can now also be created using a DataSource. Issue 227.
</li><li>The built-in profiler now better supports the Dalvik VM.
</li><li>The jarSmall build target no longer includes assertions
    (SysProperties.CHECK, CHECK2, system properties h2.check and h2.check2).
</li><li>The jarSmall build target excluded the DbUpgrade classes by mistake.
</li></ul>

<h2>Version 1.2.143 (2010-09-18)</h2>
<ul><li>If the user name and password are not set or empty, then the password is not hashed.
    To disable this behavior, set the system property h2.emptyPassword to false.
    TCP server: the default user name for the management database is now an empty string.
</li><li>Cluster: auto-commit was disabled after opening a connection.
</li><li>Connection.getAutoCommit() is now much faster, specially when using the server mode.
</li><li>Statement.cancel() had no effect when using the server mode.
</li><li>SCRIPT: the SQL script no longer contains settings that match the default value.
</li><li>Statement.cancel() did not work when running RUNSCRIPT and SCRIPT.
</li><li>Statement.cancel() could cause a NullPointerException.
</li><li>In some cases (specially when using a small cache size or a large database over 1 GB) for some
    operations like ALTER TABLE the data was written before the transaction log entries, which could cause a corrupt database
    if the process was killed during the ALTER TABLE operation. Thanks a lot to Victor Pyankov for helping solve this problem!
</li><li>The Recover tool could throw a ArrayIndexOutOfBoundsException
    when trying to recover a corrupt database file.
</li><li>The SCRIPT command and tool now uses the default file encoding
    for the system now instead of UTF-8 (as before).
    In most cases, this will not affect existing applications, as the encoding
    only affects how SQL identifiers (table names and so on) that contain special characters
    are stored. Table data is escaped, and therefore is no problem.
</li><li>The SCRIPT command and tool now also support the CHARSET option
    (like RUNSCRIPT).
</li><li>When closing a database, sometimes empty space in the database was not freed up.
</li><li>Trying to create a view with parameters in the query will now throw an exception.
    So far, creating the view was allowed, but the parameter value was not used (null was used instead).
</li><li>New experimental feature SHUTDOWN DEFRAG.
    This option re-orders the pages while closing the database so that table scans are faster.
</li><li>When using the MULTI_THREADED option, concurrently reading from a database
    (specially from a larger database, or when using a small cache size) could throw an exception.
</li><li>When adding a comment to a column that has a check constraint,
    the database couldn't be re-opened.
</li><li>New system property h2.lobClientMaxSizeMemory to set the maximum size
    of a LOB object to keep in memory on the client side when using the server mode.
</li></ul>

<h2>Version 1.2.142 (2010-08-31)</h2>
<ul><li>Documentation for using H2 on Android devices has been added under Tutorial - Android.
</li><li>An ArrayIndexOutOfBoundsException was thrown when querying the table
    information_schema.function_aliases while there are any user defined aggregate functions.
</li><li>The jar files are now about 50 KB smaller.
    In the last few versions they contained superfluous classes.
</li><li>The default time to compact a database when closing (system property h2.maxCompactTime)
    is now 0.2 seconds instead of 1 second.
</li><li>Opening an closing a database is now faster.
</li><li>In theory, when using indexes with large index rows (or when using a very small page size),
    removing rows could throw an internal exception in some cases.
</li><li>Inserting rows in reverse order could throw an ArrayIndexOutOfBoundsException
    in some cases (specially rows larger than the page size, which is 2 KB by default). Issue 226.
</li><li>H2 Console: with Chrome and Safari, resizing the table/query frame doesn't work. Issue 225.
</li><li>New experimental database file locking mechanism "FS" to use native file locking
    (no *.lock.db file is created in this case, and no background thread is started). This mechanism
    may not work on all systems (on some systems it's possible to lock the same file multiple
    times within the same virtual machine, and on some system native file locking is not working
    or unlocking is not working).
</li></ul>

<h2>Version 1.2.141 (2010-08-22)</h2>
<ul><li>New experimental pseudo-encryption algorithm "FOG".
    It makes the data appear to be encrypted. This algorithm is cryptographically extremely weak,
    and should only be used to hide data from reading the plain text using a text editor.
    Please let us know if you think this is useful or not.
</li><li>Documentation: the grammar and function documentation can now be easier translated.
</li><li>Password hash: in addition to connecting with the plain text password,
    H2 now supports connecting with the password hash.
    Like this you don't have to store plain text passwords in config files.
    For details, see the documentation at Advanced / Password Hash.
</li><li>Lucene 3.x support was added in the source code, however it is not yet enabled by default
    and is not yet supported when using the default h2 jar file. To enable Lucene 3.x support,
    the source code of H2 needs to be switched using <code>./build.sh -Dlucene=3 switchSource</code>,
    and then re-compile. To switch the source code back use <code>./build.sh -Dlucene=2 switchSource</code> (replace
    ./build.sh with build.bat on Windows).
    The plan is to use Lucene 3 by default in H2 version 1.3.x.
    Issue 147.
</li><li>The native fulltext search could cause a Java level deadlock if searching from multiple connections concurrently.
</li><li>CREATE FORCE VIEW didn't work in most cases if a referenced table didn't exist.
</li><li>MVCC: when trying to insert two rows with the same key from two connections,
    the second connection immediately threw the exception "Unique index or primary key violation".
    Instead, the second connection now waits throwing the exception until the first connection
    committed the change (same as when trying to concurrently update the same row).
</li><li>Server mode: if the client ran with a different timezone setting than the server, date values
    got shifted by the difference between the timezones. This problem affected the data types
    DATE, TIME, and TIMESTAMP, when using PreparedStatement.setDate / setTime / setTimestamp
    and ResultSet.getDate / getTime / getTimestamp.
    To solve the problem, both the client and the server need to be updated (otherwise the old transfer protocol is used).
</li><li>The built-in connection pool (JdbcConnectionPool) did not always honor the login timeout
    (the timeout could occur much too early). Thanks a lot to Dario Fassi for the patch!
</li><li>Translation: the new messages have been translated to Spanish. Thanks a lot to Dario Fassi!
</li><li>The table INFORMATION_SCHEMA.SETTINGS now contains all H2-specific system properties
    (the ones that start with "h2.") and that are explicitly set. Previously, some H2-specific settings
    (for example h2.analyzeAuto) were missing in this list.
</li><li>EXPLAIN ANALYZE with an in-memory database threw an exception. Issue 216.
</li><li>Data modifications (inserts, updates, and deletes) are now up to 5 times faster
    because converting objects to byte arrays is avoided if possible.
</li><li>LOG=0 is now a bit faster (previously undo log entries were still written).
</li><li>The command line tools now say so if the source directory of an option doesn't exist.
</li><li>It is now allowed to truncate a table if referential integrity has been disabled for this table or database.
</li><li>For unencrypted databases, the automatic upgrade temporary script file is now unencrypted again.
</li></ul>

<h2>Version 1.2.140 (2010-07-25)</h2>
<ul><li>The default MAX_LOG_SIZE is now 16 MB instead of 2 MB. Some uses cases are 3 times faster now.
</li><li>Improved cache memory usage calculation.
</li><li>Only resources that are actually used are loaded in memory.
    This can reduce the memory usage by about 400 KB.
</li><li>Profiling: the jar file can now be installed as an agent using
    java -javaagent:h2*.jar - this was be used to more accurately calculate the memory footprint of the cache.
    It has no effect when using H2 (using this feature in an application is not needed and not recommended).
</li><li>The cache was not used efficiently when reading
    (behaving like a FIFO cache instead of an LRU cache).
</li><li>Storing lobs in the database has been changed. It is now faster.
    Unfortunately, the change is not backward compatible; if you have used h2.lobInDatabase before
    you will need to re-build the database.
</li><li>SHUTDOWN COMPACT is now faster.
</li><li>H2 Console: requesting the status did not always show the window on top of others.
</li><li>H2 Console: on some system, the browser windows got opened when requesting a new one.
</li><li>The built-in profiling tool now uses a default stack depth of 32 elements and a default interval of 10 ms.
</li><li>Database files now grows in 1 MB blocks (and at least 20% at a time),
    instead of always 256 KB. This speeds up loading a new database.
</li><li>H2 Console: new built-in command @sleep to help profile another session.
</li><li>For improved performance, LOG=0 and LOG=1 are again supported.
    LOG=0 means the transaction log is disabled completely (fastest; for loading a database).
    LOG=1 means the transaction log is enabled, but FileDescriptor.sync is disabled (if no protection against power failure is required).
    LOG=2 is the default (transaction log is enabled, FileDescriptor.sync for each checkpoint).
</li><li>After deleting a lot of data (for example by dropping or altering tables, or indexes,
    or after a large transaction), opening a large database was very slow. Fixed.
</li><li>When killing the process after creating and dropping many tables (specially temporary tables),
    the database could not be opened sometimes.
</li><li>CAST(NULL AS ...) doesn't forget the data type, precision, and scale any longer.
</li><li>Experimental support for recursive queries (see 'Advanced' - 'Recursive Queries' for details).
</li><li>Problems with JDK 1.6.0_18 have been reports in the class StringUtils.quoteRemarkSQL. This method is now changed.
</li><li>The "small jar" distribution did not include the CompressTool,
    which was required for some operations. Fixed.
</li><li>The build tool now supports (minimalistic) shell mode, started using ./build.sh -
</li><li>IS NULL comparison with nested queries and linked tables did not work.
    Example: select * from (select x from test) where x is null.
</li><li>Support for null-safe equals. This includes the ANSI SQL standard syntax
    A IS [NOT] DISTINCT FROM B as well as the shorter A IS [NOT] B.
</li><li>Primary key violations threw a strange exception message when using a single column INT or BIGINT key.
</li><li>EXPLAIN ANALYZE now also lists the number of pages read from the file.
</li><li>Memory mapped files: There was a bug in version 1.2.139 so that memory mapped files
    could only be used together with split, for example: split:nioMapped: - the problem is now solved.
    It is still a good idea to use split:nioMapped: to work around the 2 GB limitation of memory mapped files.
</li><li>Memory mapped files: the system property h2.nioCleanerHack is now disabled by default
    because it was not always working as expected. Now System.gc() is used in a loop until the
    buffer is garbage collected. This of course is also not a nice solution, but the only one known to work.
    See also http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4724038
</li><li>Bugfixes for the automatic 1.1 db migration.
</li><li>If an old 1.1 database file version is found on connect, it is now possible to let the old h2
    classes (v 1.2.128) connect to the database. The automatic upgrade .jar file must be present, and the url
    must contain NO_UPGRADE=TRUE
</li><li>The automatic upgrade temporary script file is now encrypted.
</li></ul>

<h2>Version 1.2.139 (2010-07-10)</h2>
<ul><li>There was a bug in the internal IntIntHashMap. There were no known side effects however.
</li><li>ANALYZE now uses less memory.
</li><li>Memory mapped file system: improved error messages if there is a problem.
</li><li>The Lucene fulltext search did not work well
    when using special file systems such as split or nioMapped.
</li><li>The memory mapped file system (nioMapped: file prefix) couldn't seek past the file length.
</li><li>Some file system operations did not work with stacked file systems
    (for example split and nioMapped). This also affected the DeleteDbFiles tool.
</li><li>New experimental query cache.
    The cache is only used if the SQL statement and all parameters match.
    Each session has it's own cache with the given size.
    Only the last returned result per query is cached.
    Only SELECT statements are cached (excluding UNION and FOR UPDATE statements).
    This works for both statements and prepared statement.
    To enable, set the system property h2.commandCacheSize to a value larger than 0.
    There is currently no plan to enable this option by default in future versions.
</li><li>Conditions with many OR operations could throw an UnsupportedOperationException if
    h2.optimizeOr was enabled.
</li><li>XA connection: after transaction commit or rollback,
    the physical connection is set into autocommit mode.
</li><li>MULTI_THREADED did not work correctly and could throw the exception
    "try to add a record twice" for larger databases because cache access was not correctly synchronized.
</li><li>Automatic database upgrade from non page store is now possible. If the
    classes from the h2mig_pagestore_addon.jar file are in the classpath, the database will be converted to the current
    page store format automatically. The file can be found here:
    <a href="http://h2database.com/h2mig_pagestore_addon.jar">http://h2database.com/h2mig_pagestore_addon.jar</a>
</li><li>The MultiDimension tools was extended with a few helper methods.
    The API was unified a bit.
</li><li>ODBC: MS Access could not link to a table with unique index or primary key.
    To solve this problem, index meta data is currently disabled for ODBC.
    When using the new H2 version to access a database over ODBC, the PostgreSQL catalog
    is automatically upgraded. Using a database with an upgraded PostgreSQL catalog
    with an older version of H2 is still possible, but not over ODBC.
</li><li>ODBC: MS Access could not link to a table with a name containing '_'.
</li><li>ODBC: additional connection settings can now be added to the database name.
    Example: ~/test;cipher=xtea. Therefore, encrypted databases are supported.
</li><li>Local temporary tables can now be created without having to commit a transaction
    using CREATE LOCAL TEMPORARY TABLE TEMP(ID INT PRIMARY KEY) TRANSACTIONAL.
</li><li>New system property h2.dropRestrict (default false) to change the
    default action for DROP TABLE and DROP VIEW (false for CASCADE, true for RESTRICT).
    The plan is to enable this property by default in version 1.3.x.
</li><li>DROP TABLE now also supports CASCADE (still the default) and RESTRICT.
</li><li>The wrong exception was thrown when trying to connect to a server if the server was not running.
</li><li>UNION queries where the first query contains a nested query were parsed incorrectly.
    Example: "select 1 from (select 2 from dual) union select 3 from dual" was parsed as
    "select 1 from ((select 2 from dual) union select 3 from dual)". Fixed.
</li><li>Support ALTER SCHEMA name RENAME TO newName (rename schema). (patch from Kerry Sainsbury)
</li></ul>

<h2>Version 1.2.138 (2010-06-27)</h2>
<ul><li>Referential integrity: it was not allowed to delete a row with NULL in the parent table,
    if there was a row with NULL in the child table.
</li><li>Experimental feature to support case sensitive catalog names
    and database names using the DATABASE() method.
    To use this feature, set the system property h2.databaseToUpper to false.
    The plan is to set the property to false by default in version 1.3.x.
    Issue 204 - thanks to Sylvain Cuaz (ILM Informatique) for the patch.
</li><li>Experimental feature to support nested joins.
    To enable, set the system property h2.nestedJoins to true.
    If enabled, nested joins and right outer joins should work as expected (issues 145, 177, and 203).
    The plan is to enable this feature by default in version 1.3.x.
</li><li>New sample application: CachedPreparedStatements.
</li><li>When creating functions within a schema, those functions could not be used
    in views, nested queries, and constraints. Fixed.
</li><li>The benchmarks have been run using recent database versions.
</li><li>Version 1.2.137 could still not be converted to Java 1.4
    (because the Retrotranslator doesn't support BigDecimal.precision).
</li><li>Cluster: non-admin users could not connect when one of the cluster node was stopped. Issue 206.
</li><li>DROP VIEW now supports the CASCADE and RESTRICT clauses (patch from Kerry Sainsbury)
</li><li>CREATE VIEW now supports the OR REPLACE clause (patch from Kerry Sainsbury)
</li><li>Build tool: ability to only run one test using the -Dtest=className setting.
    eg: build -Dtest=org.h2.test.db.TestViewDropView test (patch from Kerry Sainsbury).
</li></ul>

<h2>Version 1.2.137 (2010-06-06)</h2>
<ul><li>Statements with a nested query and a condition that was always NULL threw an
    IndexOutOfBoundsException. Example: select * from (select null as x) where x=1
</li><li>The changes that were made to support large transactions also fixed a bug
    with large transactions (when the undo log file size is larger than 2 GB).
</li><li>Experimental feature to support very large transactions (except when using MVCC).
    To enable, set the system property h2.largeTransactions to true.
    If enabled, changes to tables without a primary key can be buffered to disk.
    The plan is to enable this feature by default in version 1.3.x.
</li><li>H2 Console: editing result sets is now also working for database other than H2,
    if they do support updatable result sets. Add "@edit" before the query.
    Only limited testing has been done on this feature,
    some data types may not work (please provide feedback if you find issues).
</li><li>Cluster: an open transaction was committed when a cluster node was stopped
    (because disabling the cluster executes SET CLUSTER '', which committed the transaction).
    Transaction are no longer committed when calling SET CLUSTER. Issue 199.
</li><li>Cluster: non-admin users couldn't connect to the cluster and couldn't disable the cluster. Issue 201.
</li><li>Cluster: NEXTVAL('sequence') was only called on one cluster node,
    therefore sequence values could get out of sync.
</li><li>Version 1.2.136 could not be converted to Java 1.4
    (because the Retrotranslator doesn't support BigDecimal.precision).
    A workaround has been implemented.
</li><li>The error code of IO exceptions in CSV functions was incorrect.
</li><li>The TriggerPassData example now uses a prefix (the database name).
</li><li>The wrong exception was thrown when trying to reference a table that doesn't support references
    such as a table in the information schema.
</li><li>Server.shutdownTcpServer can now stop all TCP servers on this JVM.
</li><li>JdbcConnectionPool: the default connection timeout is now 30 seconds (it used to be 5 minutes).
</li><li>LOB storage: LOBs added with "h2.lobInDatabase" enabled couldn't
    be read later with this option disabled.
</li></ul>

<h2>Version 1.2.136 (2010-05-24)</h2>
<ul><li>When using ORDER BY and there are both ascending and descending indexes, the database used
    the first index even when the second one could be used for sorting.
</li><li>Conditions of the form columnName IS NULL now use an index. To disable this feature,
    set the system property h2.optimizeIsNull to false.
</li><li>H2 Console: when the settings were not stored yet (for example when running for the first time),
    the last recently used settings were not stored. A workaround was to create the file
    ".h2.server.properties" manually in the current user home directory, with the contents:
    webAllowOthers=false, webPort=8082, webSSL=false,
    0=Generic H2 (Embedded)|org.h2.Driver|jdbc\:h2\:~/test|sa
    (where a comma is a newline).
</li><li>The source code is now switched to Java 6 (JDK 1.6) by default.
    Java 5 (JDK 1.5) is still supported, and the jar file is still compiled for Java 5.
</li><li>The BOM (the byte-order-mark) character 0xfeff at the beginning of the file is ignored.
    This is for compatibility with Microsoft Excel.
</li><li>When opening an existing database, the cache size is set to at most
    half the amount of memory available for the virtual machine
    (Runtime.getRuntime().maxMemory()), even if the cache size setting stored in the database
    is larger. Setting the cache size in the database URL or explicitly using SET CACHE_SIZE
    overrides this value (even if larger than the physical memory).
</li><li>INFORMATION_SCHEMA.SETTINGS: the cache size is now returned in KB.
</li><li>New system property h2.selectForUpdateMvcc, the default is false (the feature is disabled).
    When enabled, SELECT ... FOR UPDATE only locks the selected rows in the MVCC mode.
    Aggregate or GROUP BY queries are not allowed in this case.
</li><li>Profiler: improved message if there was no stack trace.
</li><li>The H2 Console can now be used within another application, in a frame or iframe. Issue 197.
</li><li>Recover tool: the statistics section now includes page type counts again.
</li><li>Queries with multiple IN(...) conditions sometimes return the wrong results when there was a multi-column index for the column.
</li><li>Queries with IN(..., NULL) did sometimes return the wrong results when there was a index for the column.
</li><li>DECIMAL: faster precision and memory usage calculations.
</li><li>A new class org.h2.tools.TriggerAdapter allows to use the ResultSet interface within trigger implementations.
</li><li>A subselect which used an index could lead to wrong results. Fixed.
</li><li>Creating a cached temporary non persistent table with a primary key threw a NullPointerException.
</li></ul>

<h2>Version 1.2.135 (2010-05-08)</h2>
<ul><li>Temporary files were not deleted when using large transactions, disabling autocommit,
    and closing the session without committing.
</li><li>Queries using multiple IN(..) conditions on the same table could cause repeated rows in the result set.
</li><li>Translation: Lubomir Grajciar translated the H2 Console as well as all error message to Slovensky. Thanks a lot!
</li><li>There was a possible Java level deadlock when opening an uninitialized database and using
    a file system that also opened a database.
</li><li>When killing the process while the database was writing a checkpoint, while it was closing,
    or while running recovery (while removing temporary tables from a previous run), the database could become corrupt.
    A new test case has been implemented to ensure such problems can not occur in the future.
</li><li>File system: new method FileSystem.setReadOnly.
</li><li>The page size for new databases can now be set in the database URL using ;PAGE_SIZE=512.
    Currently this feature is only used to simplify testing.
</li><li>New system property h2.functionsInSchema (default is false).
    If enabled, the SCRIPT statement always includes the schema name in the CREATE ALIAS statement
    (even if the schema is PUBLIC). This is not backward compatible with H2 versions 1.2.134 and older.
</li><li>Functions: it is no longer required to add a space after a comma in the parameter list.
    Example: CREATE ALIAS PARSE_INT FOR "java.lang.Integer.parseInt(java.lang.String,int)"
</li><li>Functions now reside within a schema, similar to sequences.
    If you do create such functions in schemas other than PUBLIC, then the database
    can not be opened with older versions of H2.
</li><li>Cluster: after a cluster node failed, the second cluster node can now be re-created
    and started without having to stop the first cluster node, and without having to stop
    running applications. To do that, append ;AUTO_RECONNECT=TRUE to the database URL.
</li><li>Auto-reconnect: if another connection uses the database in exclusive mode
    then this connection will try to re-connect until the exclusive mode ends.
    This is important when using the cluster mode.
</li><li>SET EXCLUSIVE now supports 0 (disable), 1 (enable), and 2 (enable and close all other connections).
</li><li>Installing the H2 as a service should now work on Windows 7.
    The batch files now explicitly set the directory using pushd "%~dp0".
</li><li>Temporary tables can now be 'cached', that means indexes of temporary tables
    can be persisted. This enables very large temporary tables (both local and global).
</li><li>The CreateCluster tool now sets the source database in exclusive mode
    before copying data to the new database.
</li><li>The H2 Console now stream results one statement / result set at a time (using chunked transfer encoding).
    To disable, set the system property h2.consoleStream to false.
    This feature is not supported when using a servlet container.
</li><li>The H2 Console did not call the CreateCluster tool with the correctly escaped parameters.
</li><li>Improved PostgreSQL compatibility for ALTER TABLE ALTER COLUMN.
</li><li>Commas at the end of INSERT ... VALUES (), (), are now supported.
</li><li>The H2 Console "Start Browser" button now works even when the IP
    address changes while the tool runs (for example, because a wireless connection
    breaks, or when enabling / disabling the network connection).
</li><li>When casting from float or double to BigDecimal, the result was
    sometimes unexpected, because "new BigDecimal(double val)" was used.
    Now "BigDecimal.valueOf(double val)" and "new BigDecimal(Float.toString(f))" are used.
    But it is still not recommended to use float or double for currency values
    (see data type documentation).
</li><li>Global temporary tables are now deleted when closing the database.
    Before, they were deleted when opening the database the next time.
</li><li>UNIQUE was not listed as a keyword.
</li><li>Improved error message when an non-SQL-exception occurred in a user
    defined function. The method name and parameters are included in the error message.
</li><li>For some queries, the exception did not include the SQL statement. Example:
    select x from system_range(1, 2) group by 'a'.
</li><li>The Shell tool will execute SQL statements passed as using the command line
    parameter -sql.
</li><li>If InetAddress.getLocalHost() fails, the database should now throw an exception.
</li><li>New columns INFORMATION_SCHEMA.INDEXES.INDEX_CLASS and
    INFORMATION_SCHEMA.TABLES.TABLE_CLASS.
</li><li>INFORMATION_SCHEMA.INDEXES.SQL now contains the CREATE INDEX statement
    instead of just the fully qualified index name.
</li></ul>

<h2>Version 1.2.134 (2010-04-23)</h2>
<ul><li>New system property h2.analyzeAuto (default 0 meaning disabled) to
    automatically run ANALYZE after that many changes to a table.
    For details, see the Javadoc of this system property.
    The plan is to set this property to 2000 in version 1.3.x.
</li><li>JdbcXAConnection.start() does not support TMJOIN. Issue 189.
</li><li>MySQL compatibility: TIMESTAMPDIFF is now an alias for DATEDIFF.
</li><li>MERGE did not respect foreign key and check constraints.
</li><li>ALTER TABLE ALTER COLUMN: changing the data type of a column
    no longer makes it nullable.
</li><li>When using AUTO_SERVER=TRUE, the server is now started as a daemon thread.
    This was a problem when using Tomcat and a connection pool.
</li><li>Servers can now be started as a daemon thread using the command line options
    -tcpDaemon, -pgDaemon, and -webDaemon.
</li><li>H2 Console: the built-in commands are now documented.
</li><li>REPLACE: if any parameter is null, the result is null.
</li><li>Queries with DISTINCT and ORDER BY will now use the index on ORDER BY if possible.
    This is specially important for queries used inside IN(SELECT ...).
</li><li>The new statement EXPLAIN ANALYZE executes the statement,
    and displays the query plan with the actual row scan count for each table.
</li><li>H2 Console: the auto-complete feature didn't quote column names
    that need quoting. Issue 186.
</li><li>The experimental LOB storage mechanism now supports all features of the
    old one. To use it, set the system property "h2.lobInDatabase" to "true".
    If you have used this feature in version 1.2.133, you need to export
    and re-import the database using SCRIPT / RUNSCRIPT.
</li><li>The functions isBeforeFirst() and isAfterLast() were not compliant to the
    JDBC spec. If the ResultSet contains no rows, they must return false. Fixed.
</li><li>Filesystem parameters like "split:" didn't work in server mode with baseDir set.
</li><li>If baseDir is set, and a database name is given which points to a directory outside
    the baseDir (eg. "../dbname"), an exception is thrown.
</li></ul>

<h2>Version 1.2.133 (2010-04-10)</h2>
<ul><li>A new experimental LOB storage mechanism is available.
    When enabled, CLOB and BLOB data is stored in hidden tables in the database.
    To use it, set the system property "h2.lobInDatabase" to "true".
    Compression is not yet implemented. Duplicate objects are only stored once.
    Usually writing is slower, but reading is faster (mainly because of caching).
</li><li>The Shell tool threw a NumberFormatException on a empty statement.
</li><li>The h2small-*.jar did not support "drop all objects delete files".
    Now it is supported (the DeleteDbFiles tool is now included).
</li><li>Operations that don't fit in memory are now faster.
    Temporary file handling was changed.
</li><li>The default maximum log stream size is now 2 MB. This is a good value
    according to some performance tests.
</li><li>New system property "h2.syncMethod" to configure what method to call when
    closing the database, on checkpoint, and on CHECKPOINT SYNC. The default is "sync" which
    calls RandomAccessFile.getFD().sync().
</li><li>ROWNUM could not be used for pagination. The follow query returned no rows:
    select x from (select *, rownum as r from system_range(1, 3)) where r=2;
</li><li>Workaround for a java.sql.Date issue: years above 9999 are not formatted correctly.
    When calling ResultSet.getString() on a date value, an alternative formatting algorithm is used.
</li><li>Prepared statements with nested subqueries did not always return the correct result. Example:
    select ?, ?, (select count(*) from test t, (select id from test where 0=?) t2 where t2.id=t.id) from test
</li><li>When using MULTI_THREADED=TRUE, the exception following exception could be thrown:
    "object already exists: TABLES"
</li><li>Comparison of integer columns against float numbers was not always correct. Issue 182.
</li><li>H2 Console: Editing the result of a multi-line queries failed. Issue 183.
</li><li>H2 Console: if the settings file (.h2.properties) can't be accessed, the exception is now ignored.
</li></ul>

<h2>Version 1.2.132 (2010-03-21)</h2>
<ul><li>The implementation of a Java to C (source code level) converter has been started.
    The plan is: it should be possible to convert H2 (or a part of it) to C so that the database
    can be run without a JVM. This will be a long term project (it may take a year or so).
</li><li>User defined table implementation can now be used using CREATE TABLE ... ENGINE.
    Thanks to Sergi Vladykin for implementing this feature!
</li><li>Improved MS SQL Server compatibility: support string concatenation using "+".
    Thanks to Stepan for the patch!
</li><li>When using the multi-threaded mode, running ANALYZE concurrently in multiple
    connections could throw an exception.
</li><li>The MERGE statement is now about 30% faster when using a PreparedStatement.
</li><li>Multi-column indexes where the second or later column was descending did not always
    produce correct results (rows were missing in the result set, or the result set was empty).
</li><li>When using large transactions or a small log size, the database could get very slow
    (profiling shows the hotspot is in FileObjectDisk.sync()).
</li><li>The Shell tool now prints the stack trace when the list mode is enabled.
</li><li>CREATE ALIAS ... AS: Compilation was incorrect if the source code contained
    characters that are not supported by the default file encoding.
</li><li>Issue 176: the JdbcDataSource now also supports a 'description' property.
</li><li>The Shell tool threw a ArrayIndexOutOfBoundsException after 20 statements.
</li><li>When using the small version of H2 ('jarClient'), the first call to
    Connection.createBlob (or similar) could throw a ClassNotFoundException
    because the file org.h2.store.fs.FileSystemZip is not included. This missing class
    is now ignored.
</li><li>Literals of type BIGINT now have the correct data type.
</li></ul>

<h2>Version 1.2.131 (2010-03-05)</h2>
<ul><li>Older versions of H2 (version 1.2.127 and older) could not connect to a new version (version 1.2.129 and newer).
    The connection blocked when trying to connect. Now the connection no longer blocks, instead a SQL exception is thrown.
</li><li>In versions 1.2.129 and 1.2.130, a database could not be opened sometimes
    after dropping tables or indexes, and then creating new indexes for existing tables.
    The exception contained the text "parent not found" (version 1.2.129) or
    "Table not found" (version 1.2.130).
</li><li>After the database was closed, a null pointer exception could occur in Database.flush.
</li><li>An ArrayIndexOutOfBoundsException could occur in the page store (eg. on "delete from table"). Fixed.
</li></ul>

<!-- [close] { --></div></td></tr></table><!-- } --><!-- analytics --></body></html>

